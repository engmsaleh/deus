<?xml version="1.0" encoding="UTF-8"?>
<aut:automator
	xmlns:aut="http://dsg.ce.unipr.it/software/deus/schema/automator"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://dsg.ce.unipr.it/software/deus/schema/automator ../../schema/automator.xsd ">


	<!-- *** EVENTS *** -->

	<aut:event id="creation" handler="it.unipr.ce.dsg.deus.example.life.LifeCreationEvent" 
	schedulerListener="it.unipr.ce.dsg.deus.example.life.LifeCreationSchedulerListener">
	 	<aut:events><!-- events to be scheduled on created node -->
		    <aut:reference id="startBirthsDeaths" />
		</aut:events>
	</aut:event>

	<aut:event id="startBirthsDeaths" handler="it.unipr.ce.dsg.deus.example.life.LifeStartBirthsDeathsEvent" oneShot="true" >
		<aut:params>
			<aut:param name="hasSameAssociatedNode" value="false" />
		</aut:params>
	</aut:event>
	
	<aut:event id="birth" handler="it.unipr.ce.dsg.deus.example.life.LifeCellBirthEvent" />
	
	<aut:event id="death" handler="it.unipr.ce.dsg.deus.example.life.LifeCellDeathEvent" />

	<aut:event id="showWorld" handler="it.unipr.ce.dsg.deus.example.life.LifeShowWorldEvent" />
	
	<aut:event id="time" handler="it.unipr.ce.dsg.deus.example.life.LogLifeTime" />
	
	<aut:event id="music" handler="it.unipr.ce.dsg.deus.impl.event.MP3Event" oneShot="true">
		<aut:params>
			<aut:param name="fileName" value="res/Underworld-ToHeal.mp3" />
			<aut:param name="modality" value="loop" />
		</aut:params>
	</aut:event>
	
	<!-- *** NODE SPECIES *** -->

	<aut:node id="lifeRegion" handler="it.unipr.ce.dsg.deus.example.life.LifeRegion">
		<aut:logger level="FINE" />
		<aut:params>
			<aut:param name="sqrtNumRegions" value="3" />
			<aut:param name="regionSide" value="30" />
			<aut:param name="initialZones" value="100" />
			<aut:param name="meanArrivalBirthDeath" value="50" />
		</aut:params>
	</aut:node>


	<!-- *** PROCESSES *** -->

	<aut:process id="periodicBirth" handler="it.unipr.ce.dsg.deus.impl.process.RectangularPulsePeriodicProcess">
		<aut:params>
			<aut:param name="period" value="10" />
			<aut:param name="startVtThreshold" value="0" />
			<aut:param name="stopVtThreshold" value="90" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="lifeRegion" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="creation" />	
		</aut:events>
	</aut:process>
	
	<aut:process id="periodicStart" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="2" />
		</aut:params>
		<aut:events>
		    <aut:reference id="startBirthsDeaths" />
		</aut:events>
	</aut:process>
	
	<aut:process id="periodicShow" handler="it.unipr.ce.dsg.deus.impl.process.RectangularPulsePeriodicProcess">
		<aut:params>
			<aut:param name="period" value="1" />
			<aut:param name="startVtThreshold" value="91" />
			<aut:param name="stopVtThreshold" value="2500" />
		</aut:params>
		<aut:events>
		    <aut:reference id="showWorld" />
		    <aut:reference id="music" />
		</aut:events>
	</aut:process>
	
	<aut:process id="time" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="100" /> 
		</aut:params>
		<aut:events>
		    <aut:reference id="time" />
		</aut:events>
	</aut:process>
	
		
	<!-- *** SIMULATION *** -->

	<aut:engine maxvt="2500" seed="12345678" keyspacesize="100"> 
		<aut:logger level="ALL" />
		<aut:processes>
			<aut:reference id="periodicBirth" />
			<aut:reference id="periodicShow" />
			<aut:reference id="time" />
		</aut:processes>
	</aut:engine>

</aut:automator>