<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<aut:automator
	xmlns:aut="http://dsg.ce.unipr.it/software/deus/schema/automator"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://dsg.ce.unipr.it/software/deus/schema/automator ../../schema/automator.xsd ">
	  
	<!-- Events Definition -->  
    <aut:event handler="it.unipr.ce.dsg.deus.example.mobilityexample.LogNodeMapEvent" id="LogMapEvent"/>
    
    <aut:event handler="it.unipr.ce.dsg.deus.example.mobilityexample.LogSystemParametersEvent" id="LogSystemParametersPeriodicProcess"/>
  
    <aut:event schedulerListener="it.unipr.ce.dsg.deus.example.mobilityexample.CarPeerBirthSchedulerListener" handler="it.unipr.ce.dsg.deus.example.mobilityexample.CarPeerBirthEvent" id="Birth">
    </aut:event>
  
    <aut:event oneShot="true" handler="it.unipr.ce.dsg.deus.example.mobilityexample.ConfigurationEvent" id="Configuration">
    </aut:event>

	<!-- Node Definition -->
    <aut:node handler="it.unipr.ce.dsg.deus.example.mobilityexample.CarPeer" id="CarPeer">
        <aut:params>
            <aut:param value="2000.0" name="avgDownlink"/> <!-- Kbit/sec -->
            <aut:param value="200.0" name="avgUplink"/> <!-- Kbit/sec -->
        </aut:params>
    </aut:node>
    
    <!-- Process Definition -->
    <aut:process handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess" id="LogMaPeriodicProcess">
        <aut:params>
            <aut:param value="5" name="period"/>
        </aut:params>
        <aut:events>
            <aut:reference id="LogMapEvent"/>
        </aut:events>
    </aut:process>
    
    <aut:process handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess" id="LogSystemParametersPeriodicProcess">
        <aut:params>
            <aut:param value="100" name="period"/>
        </aut:params>
        <aut:events>
            <aut:reference id="LogSystemParametersPeriodicProcess"/>
        </aut:events>
    </aut:process>
    
    <aut:process handler="it.unipr.ce.dsg.deus.impl.process.RectangularPulsePeriodicProcess" id="RectangularBirth">
        <aut:params>
            <aut:param value="25" name="period"/>
            <aut:param value="0" name="startVtThreshold"/>
            <aut:param value="5000" name="stopVtThreshold"/>
        </aut:params>
        <aut:nodes>
            <aut:reference id="CarPeer"/>
        </aut:nodes>
        <aut:events>
            <aut:reference id="Birth"/>
        </aut:events>
    </aut:process>
       
    <aut:process handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess" id="ConfigurationProcess">
        <aut:params>
            <aut:param value="0" name="meanArrival"/>
        </aut:params>
        <aut:events>
            <aut:reference id="Configuration"/>
        </aut:events>
    </aut:process>
 
    
    <!-- *** SIMULATION *** (10000=10h 100VT = 6 min )-->
    <aut:engine keyspacesize="10000" seed="123456789" maxvt="10000.0">
        <aut:processes>
 	        <aut:reference id="ConfigurationProcess"/>
            <aut:reference id="LogSystemParametersPeriodicProcess"/>
            <!-- <aut:reference id="LogMaPeriodicProcess"/>  -->
          	<aut:reference id="RectangularBirth"/>
        </aut:processes>
    </aut:engine>
</aut:automator>
