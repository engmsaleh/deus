<?xml version="1.0" encoding="UTF-8"?>
<aut:automator
	xmlns:aut="http://dsg.ce.unipr.it/software/deus/schema/automator"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://dsg.ce.unipr.it/software/deus/schema/automator ../../schema/automator.xsd" >


	<!-- *** EVENTS *** -->

	<aut:event id="birthPersistantRdVSP" handler="it.unipr.ce.dsg.deus.example.jxta.JXTABirthEvent"
	schedulerListener="it.unipr.ce.dsg.deus.example.jxta.JXTABirthSchedulerListener" >
		<aut:events>
			<aut:reference id="join" />
			<aut:reference id="refreshRPV" />
		</aut:events>
	</aut:event>

	<aut:event id="birthRdVSP" handler="it.unipr.ce.dsg.deus.example.jxta.JXTABirthEvent"
	schedulerListener="it.unipr.ce.dsg.deus.example.jxta.JXTABirthSchedulerListener" >
		<aut:events>
			<aut:reference id="join" />
			<aut:reference id="refreshRPV" />
		</aut:events>
	</aut:event>

	<aut:event id="birthEP" handler="it.unipr.ce.dsg.deus.example.jxta.JXTABirthEvent"
	schedulerListener="it.unipr.ce.dsg.deus.example.jxta.JXTABirthSchedulerListener" >
		<aut:events><!-- events to be scheduled on created node -->
		    <aut:reference id="join" />
		    <aut:reference id="createAdv" />
		    <aut:reference id="publish" />
		    <aut:reference id="discovery" />
		</aut:events>
	</aut:event>

	
	<aut:event id="join" handler="it.unipr.ce.dsg.deus.example.jxta.JXTAJoinEvent" >
		<aut:params>
			<aut:param name="hasSameAssociatedNode" value="true" />
		</aut:params>
	</aut:event>
	
	<aut:event id="refreshRPV" handler="it.unipr.ce.dsg.deus.example.jxta.JXTARefreshRPVEvent" />
	
	<aut:event id="publish" handler="it.unipr.ce.dsg.deus.example.jxta.JXTAPublishEvent">
		<aut:params>
			<aut:param name="hasSameAssociatedNode" value="true" />
		</aut:params>
	</aut:event>
	
	<aut:event id="discovery" handler="it.unipr.ce.dsg.deus.example.jxta.JXTADiscoveryEvent">
		<aut:params>
			<aut:param name="hasSameAssociatedNode" value="true" />
		</aut:params>
	</aut:event>
	
	<aut:event id="createAdv" handler="it.unipr.ce.dsg.deus.example.jxta.JXTACreateAdvEvent">
		<aut:params>
			<aut:param name="hasSameAssociatedNode" value="true" />
		</aut:params>
	</aut:event>
	
	
	<aut:event id="death" handler="it.unipr.ce.dsg.deus.example.jxta.JXTADeathEvent" >
		<aut:params>
			<aut:param name="typeOfPeer" value="JXTAPeer" />
		</aut:params>
	</aut:event>
	
	<aut:event id="deathRdV" handler="it.unipr.ce.dsg.deus.example.jxta.JXTADeathEvent" >
		<aut:params>
			<aut:param name="typeOfPeer" value="JXTARdVPeer" />
		</aut:params>
	</aut:event>
	
	<aut:event id="disconnection" handler="it.unipr.ce.dsg.deus.example.jxta.JXTADisconnectionEvent" >
		<aut:params>
			<aut:param name="typeOfPeer" value="JXTAPeer" />
		</aut:params>
	</aut:event>
	
	<aut:event id="disconnectionRdV" handler="it.unipr.ce.dsg.deus.example.jxta.JXTADisconnectionEvent" >
		<aut:params>
			<aut:param name="typeOfPeer" value="JXTARdVPeer" />
		</aut:params>
	</aut:event>
	
	<aut:event id="logPopulationSize" handler="it.unipr.ce.dsg.deus.impl.event.LogPopulationSizeEvent" />
	
	<aut:event id="logJXTAForPajek" handler="it.unipr.ce.dsg.deus.example.jxta.LogJXTAForPajekEvent" />
	
	<aut:event id="logJXTAForNWB" handler="it.unipr.ce.dsg.deus.example.jxta.LogJXTAForNwbEvent" />
	
	<aut:event id="logJXTAStats" handler="it.unipr.ce.dsg.deus.example.jxta.LogJXTAStatsEvent" />
	
	<aut:event id="time" handler="it.unipr.ce.dsg.deus.example.jxta.LogJXTATime"/>
	
	
	<!-- *** NODE SPECIES *** -->

	<aut:node id="JXTAPeer" handler="it.unipr.ce.dsg.deus.example.jxta.JXTAEdgePeer">
		<aut:logger level="FINE" />
	</aut:node>

	<aut:node id="JXTARdVPeer" handler="it.unipr.ce.dsg.deus.example.jxta.JXTARendezvousSuperPeer">
		<aut:logger level="FINE" />
		<aut:params >
			<aut:param name="walker" value="3" />
		</aut:params>
	</aut:node>
	
	<aut:node id="JXTAPersistantRdVPeer" handler="it.unipr.ce.dsg.deus.example.jxta.JXTARendezvousSuperPeer">
		<aut:logger level="FINE" />
		<aut:params >
			<aut:param name="walker" value="3" />
			<aut:param name="num_perst" value="5" />
		</aut:params>
	</aut:node>

	<!-- *** PROCESSES *** -->

	<aut:process id="periodicPersistantRdVBirth" handler="it.unipr.ce.dsg.deus.impl.process.RectangularPulsePeriodicProcess">
		<aut:params>
			<aut:param name="period" value="40" />
			<aut:param name="startVtThreshold" value="0" />
			<aut:param name="stopVtThreshold" value="200" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPersistantRdVPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="birthPersistantRdVSP" />
		</aut:events>
	</aut:process>

	<aut:process id="poissonRdVBirth" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="300" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTARdVPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="birthRdVSP" />
		</aut:events>
	</aut:process>
	
	<aut:process id="poissonBirth" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="100" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="birthEP" />		
		</aut:events>
	</aut:process>
	
	
	<aut:process id="periodicJoin" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="1500" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="join" />
		</aut:events>
	</aut:process>


	<aut:process id="poissonAdvCreate" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="12000" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="createAdv" />
			<!--<aut:reference id="join" />-->
		</aut:events>
	</aut:process>
	
	<aut:process id="periodicPublish" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="6000" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="publish" />
		</aut:events>
	</aut:process>
	
	<aut:process id="poissonDiscovery" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="18000" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="discovery" />
		</aut:events>
	</aut:process>
	
	<aut:process id="periodicRdVRefreshRPV" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="1500" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTARdVPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="refreshRPV" />
		</aut:events>
	</aut:process>
	
	
	<aut:process id="poissonRdVDisconnection" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="30000" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTARdVPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="disconnectionRdV" />		
		</aut:events>
	</aut:process>

	<aut:process id="poissonDisconnection" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="15000" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="disconnection" />		
		</aut:events>
	</aut:process>
	
	<aut:process id="poissonRdVDeath" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="36000" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTARdVPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="deathRdV" />		
		</aut:events>
	</aut:process>
	
	<aut:process id="poissonDeath" handler="it.unipr.ce.dsg.deus.impl.process.PoissonProcess">
		<aut:params>
			<aut:param name="meanArrival" value="12000" />	
		</aut:params>
		<aut:nodes>
			<aut:reference id="JXTAPeer" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="death" />		
		</aut:events>
	</aut:process>

	
	<aut:process id="periodicLog" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="143999.99" /> 
		</aut:params>
		<aut:events>
		    <aut:reference id="logPopulationSize" />
		    <aut:reference id="logJXTAStats" />
		    <aut:reference id="logJXTAForPajek" />
		    <aut:reference id="logJXTAForNWB" />
		</aut:events>
	</aut:process>
	
	<aut:process id="time" handler="it.unipr.ce.dsg.deus.impl.process.PeriodicProcess">
		<aut:params>
			<aut:param name="period" value="100" /> 
		</aut:params>
		<aut:events>
		    <aut:reference id="time" />
		</aut:events>
	</aut:process>
		
	<!-- *** SIMULATION *** -->

	<aut:engine maxvt="144000" seed="123456789" keyspacesize="100000"> 
		<aut:logger level="ALL" />
		<aut:processes>
			<aut:reference id="periodicPersistantRdVBirth" />
			<aut:reference id="poissonRdVBirth" />
			<aut:reference id="poissonBirth" />
			<aut:reference id="poissonDisconnection" />
			<aut:reference id="poissonRdVDisconnection" />
			<aut:reference id="poissonDeath" />
			<aut:reference id="poissonRdVDeath" />
			<aut:reference id="periodicLog" />
			<aut:reference id="time" />
		</aut:processes>
	</aut:engine>

</aut:automator>